<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>XML</title>
  <link rel="stylesheet" href="./style.css" type="text/css" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.26/vue.min.js"></script>
  <!-- just for testing include data files directly -->
  <script type="text/javascript" src="../testdata/epgxml.js"></script>
  <script type="text/javascript" src="../testdata/channels.js"></script>
  <!-- helper scripts -->
  <script type="text/javascript" src="../src/dvbviewer_xml.js"></script>


</head>

<body>
  <div id="app">
    <header>
      <h1>XML Test</h1>
    </header>
    <div id="Button">
      <button v-on:click="loadmethod">Load Data</button>
    </div>
    <p>Found: {{ epgs.length }}</p>
    <ul id="listbox">
      <li v-for="item in epgs">
        <div id="article">
          <div><span id="h1">{{ item.title }}</span>, {{ item.event }}, {{ item.start}}</div><br>
          {{ get_channel(item).name }}
        </div>
      </li>
    </ul>
    <br>
    <p>{{ message }}</p>

  </div>
  <script>
    var app = new Vue({
      el: "#app",
      data: {
        epgs: [],
        message: '',
        channelmap: new Map()
      },
      methods: {
        loadmethod: function () {
          this.message = "running  ... ";
          this.channelmap = channels_load(channels);
          this.epgs = epgs_load(epgxml);
          this.message = "done ... ";
        },
        get_channel: function(epg){
          return this.channelmap.get(epg.channel);
        }
      }
    });
  </script>

</body>

</html>